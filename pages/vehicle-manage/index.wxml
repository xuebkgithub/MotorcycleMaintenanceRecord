<!-- 车辆管理页面 - 重构版本 -->
<view class="vehicle-manage-page">
  <!-- 车辆列表 -->
  <view class="vehicle-list">
    <!-- 有车辆时显示列表 -->
    <t-cell-group wx:if="{{vehicles.length > 0}}">
      <t-swipe-cell
        wx:for="{{vehicles}}"
        wx:key="id"
        right="{{[{text: '删除', className: 'btn-delete'}]}}"
        data-id="{{item.id}}"
        data-index="{{index}}"
        bind:action-click="onDeleteVehicle"
      >
        <t-cell
          title="{{item.name}}"
          description="{{item.model}}"
          note="{{item.note}}"
          hover
          data-id="{{item.id}}"
          bind:click="onEditVehicle"
        >
          <!-- 右侧图标 -->
          <view slot="right-icon" class="vehicle-icons">
            <!-- 默认车辆星标 -->
            <t-icon
              wx:if="{{item.isDefault}}"
              name="star-filled"
              size="40rpx"
              color="#FFA500"
              class="icon-star"
              data-id="{{item.id}}"
              catchtap="onSetDefault"
            />
            <t-icon
              wx:else
              name="star"
              size="40rpx"
              color="#DCDCDC"
              class="icon-star"
              data-id="{{item.id}}"
              catchtap="onSetDefault"
            />

            <!-- 当前车辆勾选 -->
            <t-icon
              wx:if="{{item.id === currentVehicleId}}"
              name="check-circle-filled"
              size="40rpx"
              color="#0052D9"
              class="icon-check"
            />
          </view>
        </t-cell>
      </t-swipe-cell>
    </t-cell-group>

    <!-- 无车辆时显示空状态 -->
    <view wx:else class="empty-state">
      <t-icon name="car" size="120rpx" color="#DCDCDC" />
      <text class="empty-text">暂无车辆</text>
      <text class="empty-hint">点击右下角"+"按钮添加第一辆车</text>
    </view>
  </view>

  <!-- 原生悬浮添加按钮 -->
  <button
    class="custom-fab-button"
    bindtap="onAddVehicle"
    hover-class="custom-fab-button-hover"
  >
    <t-icon name="add" size="56rpx" color="#FFFFFF" />
  </button>

  <!-- 提示文本 -->
  <view class="hint-text">
    <text>左滑删除，点击编辑，点星标设为默认</text>
  </view>

  <!-- 调试信息（开发时显示） -->
  <view class="debug-info" wx:if="{{false}}">
    <text>车辆数量：{{vehicles.length}}</text>
    <text>当前车辆：{{currentVehicleId}}</text>
  </view>
</view>
